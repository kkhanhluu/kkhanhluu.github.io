{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/event-sourcing-vs-event-driven-architecture/","result":{"data":{"site":{"siteMetadata":{"title":"Kim Khanh Luu"}},"markdownRemark":{"id":"d249dd6f-31c4-5ea4-a015-7423df0b2068","excerpt":"Event sourcing vs Event Driven architecture In the previous post, we already clarified the difference between “cloud-native” and “microservices architecture…","html":"<h1>Event sourcing vs Event Driven architecture</h1>\n<p>In the <a href=\"https://kkhanhluu.github.io/what-is-cloud-native/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">previous post</a>, we already clarified the difference between “cloud-native” and “microservices architecture”. In this post, we will clarify the difference between two popular concepts that people often conflate with each other: ”<strong>Event sourcing</strong>” and ”<strong>Event Driven architecture</strong>“.</p>\n<h1>Event Driven Architecture</h1>\n<p><strong>Event driven architecture</strong> is about using events to implement communication between services asynchronously. <strong>Using events</strong> and <strong>asynchronous communication</strong> are two main characteristics of this architecture</p>\n<h3>Communication via events</h3>\n<p>In an <strong>event driven architecture</strong>, an “event” is an occurrence of something (a state change). A “Publisher” publishes events describing something happened within the service (User logged in, Order was checked out). A “Consumer” subscribes to published events and react to them (Update database, sending email when order was checked out).</p>\n<h3>Event driven architecture communicate asynchronously</h3>\n<p>In a normal case, the client calls the service via REST API, GraphQL or RPC. This is a common pattern for synchronous communication called <strong>Request-Response pattern</strong>, where the client has to wait for a full response from the service.</p>\n<p>In an <strong>event driven architecture</strong>, publishers publish events and subscribers react to those events and ublishers don’t expect any immediate response after publishing events. This picture below, taken from the book <a href=\"https://www.manning.com/books/cloud-native-patterns\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">“Cloud native patterns”</a> depicts the contrast between the primitive request/response and event-driven invocation styles</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/51e9eecaf508169117e4d068d036ad18/13a9a/request-response-event-driven.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.58227848101266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAUlEQVQY0z2QS07DQBBEff+TsAMWgLgBQmJBPnaIwiIQMJ5vxrEd2+PxQ/EkaanU3dW1aL0k+CMwACH28TSPcR99VOjx/fGcGWPmcuOShzB0JHVTscj3zHLHIncYd6B0DmUdmWrIdMtS1Niyoq5rrDH87GuWsiFVLRvhMFphrMX3LYmrDjytJTevK543muxzSzqfMf/Y8LgquJ3veFgVCFtSVxVWK953hrtlzn36x8tWY5RESEnXNvHDtT6SiopUHPjOC5QU5EKRyYq16chk/PBSv/uGty89aWubqz8GTzIxnFgEhq5BK4E1atLo28jozDAMfZRvKa2iNJLh5Ad/9f8BW0B8hc93ZCcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/51e9eecaf508169117e4d068d036ad18/f058b/request-response-event-driven.png\"\n        srcset=\"/static/51e9eecaf508169117e4d068d036ad18/c26ae/request-response-event-driven.png 158w,\n/static/51e9eecaf508169117e4d068d036ad18/6bdcf/request-response-event-driven.png 315w,\n/static/51e9eecaf508169117e4d068d036ad18/f058b/request-response-event-driven.png 630w,\n/static/51e9eecaf508169117e4d068d036ad18/13a9a/request-response-event-driven.png 637w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>There are two interesting points to note in the diagram:</p>\n<ul>\n<li>In <strong>event driven architecture</strong>, the client and the service itself are loosely coupled. The service executes as a result of an event, but it doesn’t care who triggered that event</li>\n<li>The event and the outcome are totaly disconnected. In the primitive request/response, there’s a couping between request and response.</li>\n</ul>\n<h1>Event sourcing</h1>\n<p>In many cases, we don’t just want to see the current state of data, but also want to track the complete series of action taken of that data. A real-world example is a bank system, where as an end-user, we may need to replay the complete history of transactions that happened within our account, besides just seeing the current balance.</p>\n<p>In a tradditonal database, we usually only save the final state of data, business operation context is usually lost. Event sourcing is an alternative pattern for storing data as events. In the context of event sourcing, an event represents a change that took place within your business. Every change made is stored in the event database. An entity’s current state can be created by replaying all the events in the order of occurrence.</p>\n<p>Here’s an <a href=\"https://www.eventstore.com/event-sourcing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">example</a> of events in an event sourcing system</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc445042a245919f3063d5395ab1181a/3a737/event-sourcing-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.11392405063291%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQY01WR604bMRSE9/2fqD+o2ogkUAJVIU2ISKHKhiRLoPWa9W1tr7/KplLLSEdnjkYaz8iV8h1d/2+0V9hg6WNfxgVXbhcdIfnC3+nRlW2DwceeqlEH9t2OJ91Qv2446icyUkoMaSh8SJHLh2+MV19oTftXH4qetTekYl5l8j9iGvBDoM8vDz025oQaYQS7tkG6FhM0Ohhyu9xIB410siStjLO8/JZYb3gUkultw2z9zPetYXS9Z7rcM7tvOV89M1lkLpiuGkY3NfNac7FuObs9cF0LrHdvhpvtEaklDy+/GC+OjJcN5z8UHy63nM53TO4Un+YNH79umNx1fJ4fObn6ydlaMloKJosDN3WH8ZYqV0tEwuDxMdBZg9AdfXAoZxFalfTKGVptsN6ieo3QuhgYb5DG8Gp1+ZQ/EBXHYNPYteoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/bc445042a245919f3063d5395ab1181a/f058b/event-sourcing-example.png\"\n        srcset=\"/static/bc445042a245919f3063d5395ab1181a/c26ae/event-sourcing-example.png 158w,\n/static/bc445042a245919f3063d5395ab1181a/6bdcf/event-sourcing-example.png 315w,\n/static/bc445042a245919f3063d5395ab1181a/f058b/event-sourcing-example.png 630w,\n/static/bc445042a245919f3063d5395ab1181a/3a737/event-sourcing-example.png 897w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Projection</h3>\n<p>In an <strong>event sourcing</strong> system, each change that took place in the system is recorded in the database and this event store is the signle source of truth. However, in many cases, developers need a way to view or query the data like the powerful queries in SQL or NoSQL database. A <code class=\"language-text\">projection</code> provides a view of underlying event-based data model. Often, the present the logic of translating the event-based data into a read model. This read model can be stored in any databases (SQL, NoSQL,…) and used for queries.</p>\n<p>If you to look at a example of event sourcing, you can visit my <a href=\"https://kkhanhluu.github.io/e-shop/explore/code/event-sourcing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">e-shop project</a>.</p>\n<h1>Summary</h1>\n<p><strong>Event driven architecture</strong> is about using events to implement communication between services asynchronously. <strong>Event sourcing</strong> is pattern for storing data as events. We can use both solutions next to each other but conflate those two concepts.</p>","frontmatter":{"title":"📩 Event sourcing vs Event Driven architecture","date":"April 23, 2023","description":"Introduction to event sourcing and event driven architecture","time":"10"}},"previous":{"fields":{"slug":"/what-is-cloud-native/"},"frontmatter":{"title":"🌥️ What is cloud native"}},"next":null},"pageContext":{"id":"d249dd6f-31c4-5ea4-a015-7423df0b2068","previousPostId":"5878083b-155b-5511-a4a9-82e4cabfc858","nextPostId":null}},"staticQueryHashes":["1642819152"]}